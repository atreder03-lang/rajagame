let bet = 0;
let pickColor = null;
let mode = 30;
let timer = 30;
let gameId = "room30";

setInterval(() => { timerTick() }, 1000);

function setMode(sec, btn) {
    mode = sec;
    timer = sec;
    gameId = "room" + sec;
    document.querySelectorAll(".smallBtn").forEach(b => b.classList.remove("active"));
    btn.classList.add("active");
}

function timerTick() {
    document.getElementById("timer").innerText = timer;
    if (timer <= 0) {
        timer = mode;
        checkResult();
    }
    timer--;
}

function setBet(b) {
    bet = b;
}

async function pick(col) {
    pickColor = col;
    document.getElementById("pickText").innerText = col;

    await window.placeBet(bet);
}

async function checkResult() {
    const colors = ["RED", "GREEN", "VIOLET"];
    const result = colors[Math.floor(Math.random() * 3)];

    document.getElementById("resultText").innerText = result;

    if (result === pickColor) {
        await window.addWin(bet * 2);
    }

    pickColor = null;
    document.getElementById("pickText").innerText = "--";
}

function addCoins(){ console.log("firebase handles it"); }
function removeCoins(){ console.log("firebase handles it"); }
 </script>
</body>
</html>       
